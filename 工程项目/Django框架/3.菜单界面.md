**项目系统设计**

- `menu`：菜单页面
  `playground`：游戏界面
  `settings`：设置界面

---

**项目文件结构**

- `templates`目录：管理`html`文件
- `urls`目录：管理路由，即链接与函数的对应关系
- `views`目录：管理`http`函数
- `models`目录：管理数据库数据
- `static`目录：管理静态文件，比如：
  - `css`：对象的格式，比如位置、长宽、颜色、背景、字体大小等
  - `js`：对象的逻辑，比如对象的创建与销毁、事件函数、移动、变色等
  - `image`：图片
  - `audio`：声音
  - …

- `consumers`目录：管理`websocket`函数

---

**素材地址**

- [背景图片](https://app165.acapp.acwing.com.cn/static/image/menu/background.gif) 
  - 下载方式：`wget --output-document=自定义图片名称 图片地址` 
- `jquery`库：
  - `<link rel="stylesheet" href="https://app165.acapp.acwing.com.cn/static/css/jquery-ui.min.css">`
  - `<script src="https://app165.acapp.acwing.com.cn/static/js/jquery-3.3.1.min.js"></script>`
  - 注意
    - 上述两个文件的网址已修改，跟视频中的网址不同，但可以直接使用。另外也可以下载到自己的服务器上：[jquery-ui.css](https://app165.acapp.acwing.com.cn/static/css/jquery-ui.min.css)、[jquery-3.3.1.min.js](https://app165.acapp.acwing.com.cn/static/js/jquery-3.3.1.min.js) 
      打开对应的页面后，`ctrl + s`可以保存到自己电脑上，然后本地终端里输入`scp -P 20000 jquery-ui.min.css jquery-3.3.1.min.js acs@xxx.xxx.xxx.xxx`: 可以上传到自己的服务器上

---

**操作**

```sh
cd ~/app/game
mkdir templates
rm urls.py views.py models.py # 后期内容多，存储到文件夹中
mkdir urls views models static 
mkdir static/css static/js static/image
touch urls/__init__.py views/__init__.py models/__init__.py 
```

==停止进程==

```sh
# 终止所有 Django 相关进程
pkill -f runserver

# 或者更精确的
pkill -f "manage.py runserver"
```



```diff
cd ~/app/app
vim settings.py
---TIME_ZONE = 'UTC'
+++TIME_ZONE = 'Asia/Shanghai'
LANGUAGE_CODE = 'en-us'  # 英文

+++INSTALLED_APPS = {'game.apps.GameConfig',} # 增加game.apps
+++ import os  # 在开头引入

# 在STATIC_URL = '/static/'前增加
+++STATIC_ROOT = os.path.join(BASE_DIR, 'static')  # 定义了static路径
# 放在STATIC_URL后面
+++MEDIA_ROOT = os.path.join(BASE_DIR, 'media')
+++MEDIA_URL = '/media/'
```

创建文件夹

```sh
cd ~/app/app/game/static/image
mkdir menu playground settings
cd menu
wget --output-document=background.gif https://app165.acapp.acwing.com.cn/static/image/menu/background.gif
```

浏览器

```
ip:8000/static/image/menu/background.gif
```

```sh
cd ~/app/game/static/css
touch game.css
cd ~/app/game/static/js
mkdir dist src  # dist 最终使用的js，src js源文件
mkdir ~/app/scripts
cd ~/app/scripts
vim compress_game_js.sh # 将~/app/game/static/js/src所有源文件合并成一个文件放到../dist文件夹中
<---
#! /bin/bash

JS_PATH=~/app/game/static/js/
JS_PATH_DIST=${JS_PATH}dist/
JS_PATH_SRC=${JS_PATH}src/

find ${JS_PATH_SRC} -type f -name '*.js' | sort | xargs cat > ${JS_PATH_DIST}game.js
--->
chmod +x compress_game_js.sh
```

**文件变化**

[gitee文件](https://gitee.com/hueryan/django-first/tree/31e425911dc13cfdf20e80873b17e5a2ac5c472f)  [Github变化1-rewriteDJANGO_HOST](https://github.com/hueryan/django-first/commit/04bb61e996dcc4a1a46b9ca93d4c0608c9ede91a) [Github变化2](https://github.com/hueryan/django-first/commit/31e425911dc13cfdf20e80873b17e5a2ac5c472f) 

**Html文件**

```sh
cd ~/app/game/templates
mkdir menu playground settings
mkdir multiends  # 存储多终端
cd multiends
vim web.html
```

```sh
cd ~/app/game/static/js/src
mkdir menu playground settings
vim zbase.js  # 总的js
<---
class AGame{
    constructor(id) {
    }
}
--->
```

```sh
cd ~/app/game/views
mkdir menu playground settings
touch menu/__init__.py playground/__init__.py settings/__init__.py
vim index.py  # 总的py 只会在web端调用
<---
from django.shortcuts import render

def index(request):
    return render(request, "multiends/web.html")
--->
```

路由

```sh
cd ~/app/game/urls
mkdir menu playground settings
touch menu/__init__.py playground/__init__.py settings/__init__.py
vim index.py  # 每个urls都有index.py 将其所有路径下其他文件夹路径includ进来
<---
from django.urls import path, include

urlpatterns = [

]
--->
cp index.py menu/
cp index.py playground/
cp index.py settings/
vim index.py
<---
from django.urls import path, include
from game.views.index import index

urlpatterns = [
    path("", index, name="index"),
    path("menu/", include("game.urls.menu.index")),
    path("playground/", include("game.urls.playground.index")),
    path("settings/", include("game.urls.settings.index")),
]
--->
```

[Gitee源码](https://gitee.com/hueryan/django-first/tree/5d24aaa04fda11d5881f87c1a294ef1f5f688a6b) [Github区别](https://github.com/hueryan/django-first/commit/5d24aaa04fda11d5881f87c1a294ef1f5f688a6b) 

文件结构

```sh
cd ~/app/game
tree .
.
|-- README.md
|-- app
|   |-- __init__.py
|   |-- asgi.py
|   |-- settings.env
|   |-- settings.py
|   |-- urls.py  # 全局的urls，优先进入
|   `-- wsgi.py
|-- db.sqlite3
|-- game
|   |-- __init__.py
|   |-- admin.py
|   |-- apps.py
|   |-- migrations
|   |   |-- __init__.py
|   |-- models
|   |   |-- __init__.py
|   |-- static
|   |   |-- css
|   |   |   `-- game.css
|   |   |-- image
|   |   |   |-- menu
|   |   |   |   `-- background.gif
|   |   |   |-- playground
|   |   |   `-- settings
|   |   `-- js
|   |       |-- dist
|   |       |   `-- game.js
|   |       `-- src
|   |           |-- menu                                                       
|   |           |-- playground
|   |           |-- settings
|   |           `-- zbase.js
|   |-- templates
|   |   |-- menu
|   |   |-- multiends
|   |   |   `-- web.html
|   |   |-- playground
|   |   `-- settings
|   |-- tests.py
|   |-- urls
|   |   |-- __init__.py
|   |   |-- index.py  # 然后匹配这里的url
|   |   |-- menu
|   |   |   |-- __init__.py
|   |   |   `-- index.py
|   |   |-- playground
|   |   |   |-- __init__.py
|   |   |   `-- index.py
|   |   `-- settings
|   |       |-- __init__.py
|   |       `-- index.py
|   `-- views
|       |-- __init__.py
|       |-- index.py
|       |-- menu
|       |   `-- __init__.py
|       |-- playground
|       |   `-- __init__.py
|       `-- settings
|           `-- __init__.py
|-- manage.py
`-- scripts
    `-- compress_game_js.sh
```

**增加菜单界面**

[Gitee源文件](https://gitee.com/hueryan/django-first/tree/3703faedd74727e42cb89f4457a58cadfca8efc3) [GitHub差别](https://github.com/hueryan/django-first/commit/3703faedd74727e42cb89f4457a58cadfca8efc3) 

