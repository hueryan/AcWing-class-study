### 安装 `terser` 用于压缩 `js` 

```sh
sudo apt update
sudo apt install npm
mkdir ~/npm
cd ~/npm
sudo npm install terser -g  # -g 全局用户  不加则安装到当前路径

terser xxx.js -c -m
```

```sh
vim ~/app/scripts/compress_game_js.sh  # 压缩js
```

### **移除监听函数**

```sh
vim ~/app/game/static/js/src/playground/player/zbase.js  # 很多事件已经绑定到内部窗口了，如键盘监听事件
vim ~/app/game/static/js/src/playground/zbase.js  # 移除resize的监听事件

git commit -m "compress-js_remove_lestening"
```

[Gitee-源码](https://gitee.com/hueryan/django-first/tree/e85184612e9c00f7c1a12e922d2a5524c6112cea) [Github-diff](https://github.com/hueryan/django-first/commit/e85184612e9c00f7c1a12e922d2a5524c6112cea) 

### **结算画面**

```sh
mkdir ~/app/game/static/js/src/playground/score_board
vim ~/app/game/static/js/src/playground/score_board/zbase.js  # 定义结算对象
vim ~/app/game/static/js/src/playground/zbase.js  # 创建结算对象
vim ~/app/game/static/js/src/playground/a_game_object/zbase.js  # 将结算画面置于顶层

git commit -m "score_board-start configure win_lose debugging"
```

[Gitee-源码](https://gitee.com/hueryan/django-first/tree/ad7a0462cf13bee2f2c932dfa765230543e4f164) [Github-diff](https://github.com/hueryan/django-first/commit/ad7a0462cf13bee2f2c932dfa765230543e4f164) 

```sh
vim ~/app/game/static/js/src/playground/score_board/zbase.js  # 增加监听事件，当赢/输点击后返回菜单

git commit -m "gameover click back menu"
```

[Gitee-源码](https://gitee.com/hueryan/django-first/tree/0e1945955ba57303e400f8151c3bbc68eaf9ea21) [Github-diff](https://github.com/hueryan/django-first/commit/0e1945955ba57303e400f8151c3bbc68eaf9ea21) 

**返回菜单并且移除相关加载内容**

```sh
vim ~/app/game/static/js/src/playground/zbase.js  # 关闭时移除之前加载的对象
vim ~/app/game/static/js/src/playground/score_board/zbase.js

git commit -m "back munu and remove objects"
```

[Gitee-源码](https://gitee.com/hueryan/django-first/tree/e34f53d2817bb0fc487f839320d9cef74e8c3e31) [Github-diff](https://github.com/hueryan/django-first/commit/e34f53d2817bb0fc487f839320d9cef74e8c3e31) 

**根据对局情况实现win/lose显示**

```sh
vim ~/app/game/static/js/src/playground/player/zbase.js  # 当只剩下自己胜利

git commit -m "fighting to update win or lost"
```

[Gitee-源码](https://gitee.com/hueryan/django-first/tree/d917214aab73a62844123f195ffacf24cf424306) [Github-diff](https://github.com/hueryan/django-first/commit/d917214aab73a62844123f195ffacf24cf424306)  

###  更新战绩

在后台更新

胜利+10 失败-5

```sh
vim ~/app/game/consumers/multiplayer/index.py

git commit -m "update db_score through fighting"
```

[Gitee-源码](https://gitee.com/hueryan/django-first/tree/100b21c161633a80cc220b4a03abad84b194b3e0) [Github-diff](https://github.com/hueryan/django-first/commit/100b21c161633a80cc220b4a03abad84b194b3e0) 

### 图标资源

```sh
vim ~/app/game/templates/multiends/web.html

git commit -m "add favicon.ico"
```

[Gitee-源码](https://gitee.com/hueryan/django-first/tree/f809a91ee5a72c1319e0eabb7e178460373bbeaf) [Github-diff](https://github.com/hueryan/django-first/commit/f809a91ee5a72c1319e0eabb7e178460373bbeaf) 
