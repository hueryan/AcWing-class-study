## git教程

[ACgit](https://git.acwing.com/)

## git基本概念

- 工作区：仓库的目录。工作区是独立于各个分支的。
- 暂存区：数据暂时存放的区域，类似于工作区写入版本库前的缓存区。暂存区是独立于各个分支的。
- 版本库：存放所有已经提交到本地仓库的代码版本
- 版本结构：树结构，树中每个节点代表一个代码版本。

## git常用命令

1. `git config --global user.name xxx` ：设置全局用户名，信息记录在`~/.gitconfig` 文件中

2. `git config --global user.email xxx@xxx.com`：设置全局邮箱地址，信息记录在`~/.gitconfig` 文件中

3. `git init`：将当前目录配置成git仓库，信息记录在隐藏的.git文件夹中

4. `git add XX`：将XX文件添加到暂存区

   - `git add .`：将所有待加入暂存区的文件加入暂存区

5. `git rm --cached XX`：将文件从仓库索引目录中删掉 将一个**已经跟踪的文件**变为**未跟踪状态**从版本控制中移除文件（但不从磁盘删除）常用于忘记添加 `.gitignore` 的情况

6. `git commit -m "给自己看的备注信息"`：将暂存区的内容提交到当前分支

7. `git status`：查看仓库状态

8. `git diff XX`：查看XX文件相对于暂存区修改了哪些内容

9. `git log`：查看当前分支的所有版本

   `git log --pretty=oneline`

10. `git reflog`：查看HEAD指针的移动历史（包括被回滚的版本）

11. `git reset --hard HEAD^ `或 `git reset --hard HEAD~`：将代码库回滚到上一个版本

    - `git reset --hard HEAD^^`：往上回滚两次，以此类推
    - `git reset --hard HEAD~100`：往上回滚100个版本
    - `git reset --hard 版本号`：回滚到某一特定版本

12. `git checkout — XX或git restore XX`：将XX文件尚未加入暂存区的修改全部撤销

    `git restore --staged XX` 撤销 `git add` 操作 当你误添加了不该提交的文件到暂存区时 想重新修改文件后再提交

13. `git remote add origin git@git.acwing.com:xxx/XXX.git`：将本地仓库关联到远程仓库

14. `git push -u (第一次需要-u以后不需要)`：将当前分支推送到远程仓库

    - `git push origin branch_name`：将本地的某个分支推送到远程仓库

15. `git clone git@git.acwing.com:xxx/XXX.git`：将远程仓库XXX下载到当前目录下

16. `git checkout -b branch_name`：创建并切换到`branch_name`这个分支

17. `git branch`：查看所有分支和当前所处分支

18. `git checkout branch_name`：切换到`branch_name`这个分支

19. `git merge branch_name`：将分支`branch_name`合并到当前分支上

20. `git branch -d branch_name`：删除本地仓库的`branch_name`分支

21. `git branch branch_name`：创建新分支

22. `git push --set-upstream origin branch_name`：设置本地的`branch_name`分支对应远程仓库的`branch_name`分支

23. `git push -d origin branch_name`：删除远程仓库的`branch_name`分支

24. `git pull`：将远程仓库的当前分支与本地仓库的当前分支合并

    - `git pull origin branch_name`：将远程仓库的`branch_name`分支与本地仓库的当前分支合并

25. `git branch --set-upstream-to=origin/branch_name1 branch_name2`：将远程的`branch_name1`分支与本地的`branch_name2`分支对应

26. `git checkout -t origin/branch_name` 将远程的`branch_name`分支拉取到本地

27. `git stash`：将工作区和暂存区中尚未提交的修改存入栈中

28. `git stash apply`：将栈顶存储的修改恢复到当前分支，但不删除栈顶元素

29. `git stash drop`：删除栈顶存储的修改

30. `git stash pop`：将栈顶存储的修改恢复到当前分支，同时删除栈顶元素

31. `git stash list`：查看栈中所有元素

## 作业

**注意**： 本次作业的10个题目不是独立的，每个题目会依赖于前一个题目，因此评测时如果当前题目错误，则不再评测后续题目。

创建好作业后，先进入文件夹/home/acs/homework/lesson_5/，然后：

0. 在当前目录下创建文件夹`homework`，并将`homework`目录配置成git仓库。后续作业均在`homework`目录下操作；

    ```sh
    mkdir homework
    cd homework
    git init
    ```

1. 创建文件`readme.txt`，内容包含一行：`111`；
   将修改提交一个`commit`；

   ```sh
   vim readme.txt
   git add .
   git commit -m 'add readme'
   ```

2. 在`readme.txt`文件末尾新增一行：`222`；
   将修改提交一个`commit`；

   ```sh
   vim readme.txt
   git add .
   git commit -m 'add 222'
   ```

3. 创建文件夹：`problem1`和`problem2`；
   创建文件`problem1/main.cpp`。文件内容为下述链接中的代码：https://www.acwing.com/problem/content/submission/code_detail/7834813/；
   创建文件`problem2/main.cpp`。文件内容为下述链接中的代码：https://www.acwing.com/problem/content/submission/code_detail/7834819/；

   将修改提交一个`commit`；

   ```sh
   mkdir problem1 problem2
   vim problem1/main.cpp
   vim problem2/main.cpp
   git add .
   git commit -m 'problem1_2/main.cpp'
   ```

4. 删除文件夹`problem2`；
   创建文件夹`problem3`；
   创建文件`problem3/main.cpp`。文件内容为下述链接中的代码：https://www.acwing.com/problem/content/submission/code_detail/7834841/；
   将`readme.txt`中最后一行`222`删掉，然后添加一行`333`；
   将修改提交一个`commit`；

   ```sh
   rm -rf problem2
   mkdir problem3
   vim problem3/main.cpp
   vim readme.txt
   git add .
   git commit -m 'delpro2mkpro3motifyreadme'
   ```

   

5. 在https://git.acwing.com/上注册账号并创建仓库，仓库名称为`homework`；
   将本地git仓库上传到AC Git云端仓库；

   ```sh
   git remote add origin git@git.acwing.com:hueryan/homework.git
   git pull origin master
   git push -u origin master
   ```

6. 创建并切换至新分支`dev`；
   在`readme.txt`文件中添加一行`444`；
   将修改提交一个`commit`；
   将`dev`分支推送至AC Git远程仓库；

   ```sh
   git checkout -b dev
   vim readme.txt
   git add .
   git commit -m '444'
   git push origin dev
   ```

7. 切换回`master`分支；
   在`readme.txt`文件中添加一行`555`；
   将修改提交一个`commit`；

   ```sh
   git checkout master
   vim readme.txt
   git add .
   git commit -m '555'
   ```

8. 将`dev`分支合并到`master`分支；
   手动处理冲突，使`readme`文件最终内容包含4行：`111`、`333`、`555`、`444`；
   将修改提交一个`commit`；

   ```sh
   git merge dev
   ```

9. 将`master`分支的版本库`push`到AC Git云端仓库；
   登录`myserver`服务器（4. ssh作业中配置的服务器）；
   创建并清空文件夹：`~/homework/lesson_5/`；
   将AC Git云端仓库`clone`到`~/homework/lesson_5/`中；

   ```sh
   git push
   ssh myserver
   mkdir homework/lesson_5
   cd homework/lesson_5
   git clone git@git.acwing.com:hueryan/homework.git
   ```

   



